<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Optimizer Passes and Flows &mdash; hls4ml 0.6.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_contributors.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Citation and Contributors" href="reference.html" />
    <link rel="prev" title="Backends and I/O Types" href="details.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html">
            
              <img src="_static/hls4ml_logo_navbar.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.6.0.dev233+g8eb29fc2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="status.html">Status and Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="command.html">Command Line Interface (deprecated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="details.html">Backends and I/O Types</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Optimizer Passes and Flows</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#optimizer-passes">Optimizer passes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flows">Flows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Citation and Contributors</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/hls-model.html">HLS Model Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/profiling.html">Profiling</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="advanced/fifo_depth.html">FIFO Buffer Depth Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced/extension.html">Extension API</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Autogenerated API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="autodoc/hls4ml.backends.html">hls4ml.backends package</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc/hls4ml.converters.html">hls4ml.converters package</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc/hls4ml.model.html">hls4ml.model package</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc/hls4ml.report.html">hls4ml.report package</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc/hls4ml.utils.html">hls4ml.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="autodoc/hls4ml.writer.html">hls4ml.writer package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hls4ml</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Optimizer Passes and Flows</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/fastmachinelearning/hls4ml/blob/main/docs/flows.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="optimizer-passes-and-flows">
<h1>Optimizer Passes and Flows<a class="headerlink" href="#optimizer-passes-and-flows" title="Permalink to this heading"></a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">hls4ml</span></code> package internally represents the model graph with the <a class="reference internal" href="autodoc/hls4ml.model.html#hls4ml.model.graph.ModelGraph" title="hls4ml.model.graph.ModelGraph"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelGraph</span></code></a> class.
The nodes in this graph are represented by classes derived from the <a class="reference internal" href="autodoc/hls4ml.model.html#hls4ml.model.layers.Layer" title="hls4ml.model.layers.Layer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layer</span></code></a> base class.</p>
<p>Layers have only inputs, outputs and attributes.
All information about the layer’s state and configuration is stored in the attributes.
All weights, variables and data types are attributes and there are mapping views to sort through them.
Layers can define expected attributes and can be verified for correctness, or to produce a list of configurable attributes that user can tweak.</p>
<section id="optimizer-passes">
<h2>Optimizer passes<a class="headerlink" href="#optimizer-passes" title="Permalink to this heading"></a></h2>
<p>An <a class="reference internal" href="autodoc/hls4ml.model.optimizer.html#hls4ml.model.optimizer.optimizer.OptimizerPass" title="hls4ml.model.optimizer.optimizer.OptimizerPass"><code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizerPass</span></code></a> transforms a model graph.
All model/layer transformations should happen in these optimizer passes.
There are a number of types of optimizer passes:</p>
<blockquote>
<div><ul class="simple">
<li><p>layer-specific: These are special optimizations for a given layer.
An example is the <a class="reference internal" href="autodoc/hls4ml.model.optimizer.passes.html#module-hls4ml.model.optimizer.passes.fuse_biasadd" title="hls4ml.model.optimizer.passes.fuse_biasadd"><code class="xref py py-class docutils literal notranslate"><span class="pre">fuse_biasadd</span></code></a> class that adds a bias to a <a class="reference internal" href="autodoc/hls4ml.model.html#hls4ml.model.layers.Dense" title="hls4ml.model.layers.Dense"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dense</span></code></a>, <a class="reference internal" href="autodoc/hls4ml.model.html#hls4ml.model.layers.Conv1D" title="hls4ml.model.layers.Conv1D"><code class="xref py py-class docutils literal notranslate"><span class="pre">Conv1D</span></code></a>, or <a class="reference internal" href="autodoc/hls4ml.model.html#hls4ml.model.layers.Conv2D" title="hls4ml.model.layers.Conv2D"><code class="xref py py-class docutils literal notranslate"><span class="pre">Conv2D</span></code></a> layer.</p></li>
<li><p>backend-specific: These are only used for particular backends. An example is <code class="xref py py-class docutils literal notranslate"><span class="pre">ReshapeStream</span></code>.</p></li>
<li><p>model-level: These model-level optimizer passes are run on every type of layer.</p></li>
<li><p>templates: These add the HLS code for a particular backend, e.g., <a class="reference internal" href="autodoc/hls4ml.backends.vivado.passes.html#hls4ml.backends.vivado.passes.core_templates.DenseFunctionTemplate" title="hls4ml.backends.vivado.passes.core_templates.DenseFunctionTemplate"><code class="xref py py-class docutils literal notranslate"><span class="pre">DenseFunctionTemplate</span></code></a>.</p></li>
<li><p>decorators</p></li>
</ul>
</div></blockquote>
</section>
<section id="flows">
<h2>Flows<a class="headerlink" href="#flows" title="Permalink to this heading"></a></h2>
<p>A <a class="reference internal" href="autodoc/hls4ml.model.flow.html#hls4ml.model.flow.flow.Flow" title="hls4ml.model.flow.flow.Flow"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flow</span></code></a> is an ordered set of optimizers that may depend on other flows.
There are common model-level flows that can run regardless of the backend, and there are backend-specific flows.
Each backend provides provides a default flow for processing.
For example, the Vivado backend defaults to an <a class="reference external" href="https://github.com/fastmachinelearning/hls4ml/blob/7c0a065935904f50bd7e4c547f85354b36276092/hls4ml/backends/vivado/vivado_backend.py#L148-L160">IP flow</a> that requires additional flows and produces an IP.
Another example is FIFO buffer depth optimization explained in the <a class="reference internal" href="advanced/fifo_depth.html#fifo-buffer-depth-optimization"><span class="std std-ref">FIFO Buffer Depth Optimization</span></a> section.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="details.html" class="btn btn-neutral float-left" title="Backends and I/O Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="reference.html" class="btn btn-neutral float-right" title="Citation and Contributors" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Fast Machine Learning Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>